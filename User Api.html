<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User API</title>
</head>
<body>
    <h1>User API</h1>

    <!-- Get all users button -->
    <button id="getUsersButton">Get All Users</button>
    <div id="usersList"></div>

    <h2>Get User By ID</h2>
    <input type="number" id="userIdInput" placeholder="Enter User ID">
    <button id="getUserButton">Get User</button>
    <div id="userInfo"></div>

    <script>
        // Replace with your username and password for Basic Auth
        const username = 'admin'; // Basic Auth Username
        const password = 'password123'; // Basic Auth Password

        // Encode the credentials in base64 for Basic Auth
        const authHeader = 'Basic ' + btoa(username + ':' + password);

        // Get all users
        document.getElementById('getUsersButton').addEventListener('click', function () {
            fetch('http://localhost/business-jmab/api/users', {
                method: 'GET',
                headers: {
                    'Authorization': authHeader, // Add Basic Auth header
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const users = data.users;
                    const usersList = document.getElementById('usersList');
                    usersList.innerHTML = '';
                    users.forEach(user => {
                        const userItem = document.createElement('div');
                        userItem.textContent = `ID: ${user.id}, Name: ${user.first_name} ${user.last_name}, Email: ${user.email}`;
                        usersList.appendChild(userItem);
                    });
                } else {
                    document.getElementById('usersList').textContent = 'No users found or error.';
                }
            })
            .catch(error => {
                document.getElementById('usersList').textContent = 'Error fetching users.';
            });
        });

        // Get user by ID
        document.getElementById('getUserButton').addEventListener('click', function () {
            const userId = document.getElementById('userIdInput').value;
            if (!userId) {
                alert('Please enter a user ID.');
                return;
            }

            fetch(`http://localhost/business-jmab/api/user?id=${userId}`, {
                method: 'GET',
                headers: {
                    'Authorization': authHeader,
                    'Content-Type': 'application/json',

                }
            })
            .then(response => response.json())
            .then(data => {
                const userInfoDiv = document.getElementById('userInfo');
                userInfoDiv.innerHTML = '';

                if (data.success) {
                    const user = data.user;
                    userInfoDiv.innerHTML = `
                        <p>ID: ${user.id}</p>
                        <p>Name: ${user.first_name} ${user.last_name}</p>
                        <p>Email: ${user.email}</p>
                    `;
                } else {
                    userInfoDiv.textContent = 'User not found.';
                }
            })
            .catch(error => {
                document.getElementById('userInfo').textContent = 'Error fetching user.';
            });
        });
    </script>
</body>
</html>
